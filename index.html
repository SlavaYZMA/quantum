<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Quantum Portrait</title>
    <link rel="icon" href="data:;base64,=">
    <link rel="stylesheet" href="./css/style.css">
    <script src="https://cdnjs.cloudflare.com/ajax/libs/p5.js/1.5.0/p5.min.js"></script>
    <script src="./js/globals.js"></script>
    <script src="./js/particles.js"></script>
    <script src="./js/observer.js"></script>
    <script src="./js/audio.js"></script>
    <script src="./js/textSteps.js"></script>
    <script src="./js/utils.js"></script>
    <script src="./js/text-flicker.js"></script>
    <script src="./js/main.js"></script>
</head>
<body>
    <section id="step-0" class="step quantum-flux">
        <div class="text-cluster" data-i18n="step0_text"></div>
        <div class="quantum-cluster">
            <div id="RU" class="particle-button" data-action="setLanguageAndNext">RU</div>
            <div id="ENG" class="particle-button" data-action="setLanguageAndNext">ENG</div>
        </div>
    </section>
    <section id="step-1" class="step quantum-flux">
        <div class="text-cluster">
            <div data-i18n="step1_title"></div>
            <div data-i18n="step1_text1"></div>
            <div data-i18n="step1_text2"></div>
            <div data-i18n="step1_text3"></div>
        </div>
        <div class="quantum-cluster">
            <div class="particle-button continue" data-action="moveToNextStep" data-i18n="continue"></div>
            <div class="particle-button back" data-action="moveToPreviousStep" data-i18n="back"></div>
        </div>
    </section>
    <section id="step-2" class="step quantum-flux">
        <div class="text-cluster">
            <div data-i18n="step2_title"></div>
            <div data-i18n="step2_text1"></div>
        </div>
        <div class="quantum-cluster">
            <div class="particle-button" id="uploadImage" data-action="uploadImage" data-i18n="upload_image"></div>
            <div class="particle-button" id="useCamera" data-action="startCamera" data-i18n="use_camera"></div>
            <div class="particle-button" id="useArchive" data-action="showImageArchiveModal" data-i18n="use_archive"></div>
            <div class="particle-button back" data-action="moveToPreviousStep" data-i18n="back"></div>
        </div>
    </section>
    <section id="step-2.1" class="step quantum-flux">
        <div class="text-cluster">
            <div data-i18n="step2_text2"></div>
            <div data-i18n="step2_text3"></div>
            <div data-i18n="step2_text4"></div>
        </div>
        <div class="quantum-cluster">
            <div class="particle-button continue" data-action="moveToNextStep" data-i18n="continue"></div>
            <div class="particle-button back" data-action="moveToPreviousStep" data-i18n="back"></div>
        </div>
    </section>
    <section id="step-3" class="step quantum-flux">
        <div class="text-cluster">
            <div data-i18n="step3_title"></div>
            <div data-i18n="step3_text1"></div>
            <div data-i18n="step3_text2"></div>
            <div data-i18n="step3_text3"></div>
            <div data-i18n="step3_text4"></div>
            <div data-i18n="step3_text5"></div>
            <div data-i18n="step3_text6"></div>
            <div data-i18n="step3_text7"></div>
            <div data-i18n="step3_text8"></div>
        </div>
        <div class="quantum-cluster">
            <div class="particle-button continue" data-action="moveToNextStep" data-i18n="continue"></div>
            <div class="particle-button back" data-action="moveToPreviousStep" data-i18n="back"></div>
        </div>
    </section>
    <section id="step-4" class="step quantum-flux">
        <div class="text-cluster">
            <div data-i18n="step4_title"></div>
            <div data-i18n="step4_text1"></div>
            <div data-i18n="step4_text2"></div>
            <div data-i18n="step4_text3"></div>
        </div>
        <div class="quantum-observation">
            <div id="portrait-animation-container-step-4"></div>
            <div class="terminal-log" id="terminal-log-step-4"></div>
        </div>
        <div class="quantum-cluster">
            <div class="particle-button continue" data-action="moveToNextStep" data-i18n="continue"></div>
            <div class="particle-button back" data-action="moveToPreviousStep" data-i18n="back"></div>
        </div>
    </section>
    <section id="step-5" class="step quantum-flux">
        <div class="text-cluster">
            <div data-i18n="step5_title"></div>
            <div data-i18n="step5_text1"></div>
            <div data-i18n="step5_text2"></div>
            <div data-i18n="step5_text3"></div>
        </div>
        <div class="quantum-observation">
            <div id="portrait-animation-container-step-5"></div>
            <div class="terminal-log" id="terminal-log-step-5"></div>
            <img id="saved-portrait" style="display: none; max-width: 100%;">
        </div>
        <div class="quantum-cluster">
            <input class="quantum-input" id="portraitName" type="text" placeholder="Назови ∅" data-i18n-placeholder="portrait_name_placeholder">
            <div class="particle-button" id="saveImage" data-action="recordObservation" data-i18n="save_observation"></div>
            <div class="particle-button continue" data-action="moveToNextStep" data-i18n="continue"></div>
            <div class="particle-button back" data-action="moveToPreviousStep" data-i18n="back"></div>
        </div>
    </section>
    <section id="step-6" class="step quantum-flux">
        <div class="text-cluster">
            <div data-i18n="step6_title"></div>
            <div data-i18n="step6_text1"></div>
            <div data-i18n="step6_text2"></div>
            <div data-i18n="step6_text3"></div>
        </div>
        <div class="quantum-cluster">
            <div class="particle-button" id="shareObservation" data-action="shareToArchive" data-i18n="share_observation"></div>
            <div class="particle-button continue" data-action="moveToNextStep" data-i18n="continue"></div>
            <div class="particle-button back" data-action="moveToPreviousStep" data-i18n="back"></div>
        </div>
    </section>
    <section id="step-7" class="step quantum-flux">
        <div class="text-cluster">
            <div data-i18n="step7_title"></div>
            <div data-i18n="step7_text1"></div>
            <div data-i18n="step7_text2"></div>
            <div data-i18n="step7_text3"></div>
        </div>
        <div class="quantum-cluster">
            <div class="particle-button" id="restart" data-action="restart" data-i18n="restart"></div>
            <div class="particle-button" id="archive" data-action="showImageArchiveModal" data-i18n="archive"></div>
            <div class="particle-button" id="aboutAuthors" data-action="showAboutAuthors" data-i18n="about_authors"></div>
            <div class="particle-button back" data-action="moveToPreviousStep" data-i18n="back"></div>
        </div>
    </section>
    <div id="image-archive-modal" class="modal quantum-flux" style="display: none;">
        <div class="modal-cluster">
            <div class="close-particle" id="close-modal">×</div>
            <div class="image-grid" id="image-grid"></div>
        </div>
    </div>
    <div id="camera-modal" class="modal quantum-flux" style="display: none;">
        <div class="modal-cluster">
            <div class="close-particle" id="close-camera-modal">×</div>
            <video id="camera-video" autoplay style="width: 100%; max-width: 640px; height: auto;"></video>
            <canvas id="camera-canvas" style="display: none;"></canvas>
            <div class="quantum-cluster">
                <div class="particle-button" id="capture-photo" data-action="capturePhoto" data-i18n="capture_photo"></div>
            </div>
        </div>
    </div>
    <div id="quantum-canvas-container"></div>
    <script>
        console.log('Inline script loaded after main.js');
    </script>
